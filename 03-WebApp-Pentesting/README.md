# Web Application Pentesting (Week 4)

## Objective
Deploy a vulnerable web app (DVWA/Juice Shop/CTF OVA) and use Burp Suite, OWASP ZAP, dir brute-force tools to discover flags and vulnerabilities.

## Setup (Docker example for DVWA)
```bash
sudo apt update && sudo apt install -y docker.io
sudo docker run --rm -p 8080:80 --name dvwa -d vulnerables/web-dvwa
```

## Recon & Discovery
```bash
nmap -A -T4 -p 8080 TARGET_IP -oA scans/dvwa
gobuster dir -u http://TARGET_IP:8080 -w /usr/share/wordlists/dirb/common.txt -t 50 -o gobuster.txt
```

## Burp / ZAP Testing
- Intercept requests, test login parameters for SQLi.
- Try XSS in search/comments.
- Look for debug endpoints or exposed backups.

## SQL Injection (sqlmap example)
```bash
sqlmap -u "http://TARGET_IP:8080/vulnerabilities/sqli/?id=1&Submit=Submit" --cookie="PHPSESSID=..." --dbs --risk=3 --level=5
```

## Reporting
- Screenshot exploitable endpoints and flags.
- Propose fixes: input validation, parameterized queries, secure headers.

## Extras
- Add mod_security (WAF) in front, re-test.
- Content Security Policy (CSP) and strict cookies (HttpOnly/SameSite).

---

## One-Command Launch (DVWA & Juice Shop)

### DVWA
```bash
docker compose -f dvwa-compose.yml up -d
# Visit: http://localhost:8080
# Initial setup: http://localhost:8080/setup.php  → Click "Create / Reset Database"
# Login: admin / password
# Set Security Level (DVWA Security): low → medium → high for progression
```
**Practice endpoints & payloads:**
- SQLi: `vulnerabilities/sqli/?id=1&Submit=Submit` (use `sqlmap` with `--cookie` from your session)
- XSS (Reflected): `vulnerabilities/xss_r/` try payload `<script>alert(1)</script>`
- Command Injection: `vulnerabilities/exec/`

### Juice Shop
```bash
docker compose -f juice-compose.yml up -d
# Visit: http://localhost:3000
```
**Recon ideas (Burp/ZAP):**
- Login API: `POST /rest/user/login` (test weak passwords, JWT handling)
- Product search: `GET /rest/products/search?q=` (XSS tests)
- File endpoints: `/ftp`, `/data` (forced browsing)

**Extras (make it better):**
- Add a reverse proxy (nginx) with security headers → re-test (CSP, HSTS, X-Frame-Options)
- Use Burp Intruder for fuzzing and rate-limit testing

